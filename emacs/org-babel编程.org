* what is org babel
Babelæ˜¯å·´åˆ«å¡”,è®²çš„æ˜¯ä¸€ä¸ªè¯­è¨€åˆ†è£‚äººç±»åˆä½œçš„å¯“è¨€,åˆšå¥½å¯¹åº”å¤šè¯­è¨€æ”¯æŒç¼–ç¨‹;
å°±æ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å¼,å¯ä»¥åœ¨orgæ–‡ä»¶ä¸­è¿è¡Œæºç ,è€Œä¸ç”¨è´¹å¿ƒçš„åœ¨åˆ«çš„
ç¼–è¾‘å™¨ä¸­è¿è¡Œ,å¯¹äºä¸€äº›å°çš„ç®—æ³•ååˆ†æœ‰ç”¨åªèƒ½è¿™ä¹ˆè¯´;

ä½¿ç”¨ä¹Ÿååˆ†ç®€å•,ç¼–å†™å¥½ä»£ç ä¹‹åæ‰§è¡Œ =C-c C-c= å³å¯
è¿è¡Œ

* å¿«æ·é”®

1. *C-c C-c* è¿è¡Œä»£ç ,å¹¶è¿›è¡Œè¾“å‡º
2. *C-c C-v v* å±•ç¤ºè¦è¿è¡Œçš„æºç ,ä¸è¾“å‡º


* ç›¸å…³é“¾æ¥ğŸ”—
1. [[https://orgmode.org/worg/org-contrib/babel/languages/index.html][org-babelå®˜æ–¹æ–‡æ¡£]]
2. [[https://orgmode.org/worg/org-contrib/babel/languages/ob-doc-C.html][C,C++é…ç½®]]

* cofig org 
åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ç›¸åº”è¯­è¨€çš„å¼€å¯å°±è¡Œ,å¦‚æœæ‰¾ä¸åˆ°ç¯å¢ƒå˜é‡éœ€è¦æ‰‹åŠ¨æ·»åŠ 
=$PATH= å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒå˜é‡

#+begin_src lisp
;; è®¾ç½®æ”¯æŒçš„è¯­è¨€
  (org-babel-do-load-languages
   'org-babel-load-languages
   '((python . t)
     (shell . t)
     (C .t)))
;; å¦‚æœä¸èƒ½æ‰¾åˆ°ç³»ç»Ÿå˜é‡éœ€è¦æ‰‹åŠ¨é…ç½®
  (setq org-babel-python-command "/Library/Frameworks/Python.framework/Versions/3.11/bin/python3")

#+end_src

** å„ç§ä»£ç è¿è¡Œ
*** shell
    #+begin_src shell
    pwd
    #+end_src

    #+RESULTS:
    : /Users/xieshuqiang/Documents/typora/emacs
*** Cè¯­è¨€
    #+begin_src C :includes <stdio.h>
    int a=1;
    int b=1;
    printf("%d\n", a+b);
    #+end_src

    #+RESULTS:
    : 2

*** C++
    #+begin_src C++ :includes <iostream>
    std::cout<<"Hello World!\n";
    #+end_src

    #+RESULTS:
    : Hello World!








 

    
*** å¸¦æœ‰å¤–éƒ¨å˜é‡çš„C
#+header: :var mystring="Sunday" :var myint=145 :var mydouble=3.14
#+BEGIN_SRC C :includes <stdio.h>
  printf ("mystring %s\n", mystring);
  printf ("myint    %d\n", myint);
  printf ("mydouble %g\n", mydouble);
#+END_SRC

#+RESULTS:
| mystring | Sunday |
| myint    |    145 |
| mydouble |   3.14 |


** Cè¯­è¨€çš„ä¸€äº›æ”¯æŒ

*** headeræ”¯æŒ
org-babel æ”¯æŒä¸€äº›å¤´éƒ¨è®¾ç½®,å¸®åŠ©æˆ‘ä»¬è®¾ç½®ä¸€äº›å˜é‡,å¼•ç”¨ç­‰
åœ¨æºç ä¸Šé¢å¼•å…¥ =#+header:= å¯ä»¥æŠŠè¿™äº›è®¾ç½®å¼•å…¥ç¨‹åºä¸­;
1) =:var=
   VAEIABLE=VALUE,æ”¯æŒä»¥ä¸‹ç±»å‹
   #+begin_src C
int,
double,
string or const char*,
type[]    // type = int, double, string, const char*
type[][]  // type = int, double, string, const char*
   #+end_src
   å…¶ä¸­type[][]ç”¨äºå­˜å‚¨org-tableçš„å˜é‡
2) =:cmdline=
   ä¼ é€’å¯æ‰§è¡Œæ–‡ä»¶çš„å‘½ä»¤è¡Œå‚æ•°
3) =:flages=
   ä¼ é€’ç»™ç¼–è¯‘å™¨çš„æ ‡å¿—
4) =:main=
   å¯ä»¥è®¾ç½®ä¸ºâ€œnoâ€ä»¥ç¦æ­¢åœ¨ main å‡½æ•°è°ƒç”¨ä¸­åŒ…è£…ä»£ç å—ã€‚
5) =:includes=
   ä»£ç å¼•ç”¨çš„å¤–éƒ¨åŒ…
6) =:defines=
   ç¨‹åºä¸­çš„#define
7) =libs=
   é“¾æ¥åº“

#+header: :includes <stdio.h>
#+BEGIN_SRC C 
  printf ("hello babel ");
#+END_SRC

#+RESULTS:
: hello babel

*** ç¤ºä¾‹ç¨‹åº

**** include

    1) åŒ…å«å¤šä¸ªåº“,åº”è¯¥ä½¿ç”¨åˆ—è¡¨
    #+begin_src C++ :includes '(<iostream> <stdio.h>) :results output
    std::cout<<"Hello World!\n";
    printf("%d\n", 2+2);
    #+end_src

    #+RESULTS:
    : Hello World!
    : 4

**** æ ‡é‡å˜é‡

    #+header: :includes <stdio.h>
    #+header: :var mystring="Sunday" :var myint=145 :var mydouble=3.14
    #+BEGIN_SRC C
      printf ("mystring %s\n", mystring);
      printf ("myint    %d\n", myint);
      printf ("mydouble %g\n", mydouble);
    #+END_SRC

    #+RESULTS:
    | mystring | Sunday |
    | myint    |    145 |
    | mydouble |   3.14 |

    
**** org-tableçš„å¤„ç†
å¯ä»¥æŠŠtableä¸­çš„æ•°æ®è¯»å…¥,ç„¶åè¿›è¡Œå¤„ç†
#+name: somedata
| nb    | sqr | noise |
|-------+-----+-------|
| zero  |   0 |  0.23 |
| one   |   1 |  1.31 |
| two   |   4 |  4.61 |
| three |   9 |  9.05 |
| four  |  16 | 16.55 |

*è¡¨å•å†…å®¹æ€»æ˜¯ä»¥å­—ç¬¦ä¸²è¿›è¡Œè¾“å…¥,å¦‚æœæ˜¯æ•°æ®éœ€è¦æèµ·è¿›è¡Œç±»å‹è½¬åŒ–*
ä¸Šé¢çš„ä»£ç åœ¨Cè¯­è¨€ä¸­è½¬åŒ–ä¸ºä¸‹é¢çš„è¾“å…¥
#+begin_src C
const char* somedata[5][3] = {...};  // in C & C++
//ç±»å‹è½¬åŒ–
int    cell = atoi(somedata_h(4,"sqr"));        // integer conversion in C & C++
double cell = atof(somedata_h(4,"noise"));      //  double conversion in C & C++
#+end_src

#+name: c-table
#+header: :exports results
#+begin_src C++ :var somedata=somedata
  #include "stdlib.h"
  #include "stdio.h"
  int main()
  {
    for (int i=0; i<somedata_rows; i++) {
      printf ("%2d ", i);
      for (int j=1; j<somedata_cols; j++) {
        const char* cell = somedata[i][j];
        printf ("%5s %5g ", cell, 1000*atof(cell));
      }
      printf("\n");
    }
    return 0;
  }
#+end_src

#+RESULTS: c-table
| 0 |  0 |     0 |  0.23 |   230 |
| 1 |  1 |  1000 |  1.31 |  1310 |
| 2 |  4 |  4000 |  4.61 |  4610 |
| 3 |  9 |  9000 |  9.05 |  9050 |
| 4 | 16 | 16000 | 16.55 | 16550 |

#+caption: è¿è¡Œçš„æºç 
#+begin_src C
const char* somedata[5][3] = {
 {"zero","0","0.23"},
 {"one","1","1.31"},
 {"two","4","4.61"},
 {"three","9","9.05"},
 {"four","16","16.55"}
};
const int somedata_rows = 5;
const int somedata_cols = 3;

#ifndef _STRING_H
#include <string.h>
#endif
int get_column_num (int nbcols, const char** header, const char* column)
{
  int c;
  for (c=0; c<nbcols; c++)
    if (strcmp(header[c],column)==0)
      return c;
  return -1;
}

const char* somedata_header[3] = {"nb","sqr","noise"};
const char* somedata_h (int row, const char* col) { return somedata[row][get_column_num(3,somedata_header,col)]; }
#include "stdlib.h"
#include "stdio.h"
int main()
{
  for (int i=0; i<somedata_rows; i++) {
    printf ("%2d ", i);
    for (int j=1; j<somedata_cols; j++) {
      const char* cell = somedata[i][j];
      printf ("%5s %5g ", cell, 1000*atof(cell));
    }
    printf("\n");
  }
  return 0;
}

#+end_src



** ä¸ªäººCä»£ç è¿è¡Œç¤ºä¾‹

#+begin_src C
  #include<stdio.h>
#include<string.h>
#include<stdlib.h>

/**
   éš¾åº¦ï¼šç®€å•
 * ä¸¤æ•°ä¹‹å’Œ
 */

int* twoSum(int* nums, int numsSize, int target, int* returnSize);

int main(int argc,char *argv[]) {

    int nums[5] = {2,4,6,9,5};
    int *returnSize = malloc(sizeof(int));
    int *resul = malloc(sizeof(int)*2);
    int *returnResul = twoSum(nums, 5, 8, returnSize);
    printf("Indices of the two numbers are: %d and %d\n", returnResul[0], returnResul[1]);
    return 0;
}


int* twoSum(int* nums, int numsSize, int target, int* returnSize){

    for (int i=0; i<numsSize; i++)
    {
        for (int m=i+1; m<numsSize; m++)
            if (target == nums[i] + nums[m])
            {
                int * ret = malloc(sizeof(int) * 2);
                // è¿™æ ·ä¹Ÿèƒ½ç»™æŒ‡é’ˆèµ‹å€¼
                ret[0] = i;
                ret[1] = m;
                // *point æ‰æ˜¯ç»™æŒ‡é’ˆèµ‹å€¼
                *returnSize = 2;
                return ret;
            }
    }
    *returnSize = 0;
    return returnSize;
}
#+end_src

#+RESULTS:
: Indices of the two numbers are: 0 and 2
