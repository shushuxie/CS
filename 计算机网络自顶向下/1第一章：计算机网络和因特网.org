* 1.1 什么是因特网

#+ATTR_HTML: :width 300px
#+caption: 因特网的组成部分(图)
[[file:imag/Snipaste_2023-11-19_12-29-46.png]]

** 1.1.1 具体构成

*** 名词解释
1) 端系统/主机
: 构成因特网的初始部分，包括手机，电脑，服务器，电视游戏机，家用电器，手表、眼睛、汽车、运输控制系统等；上面的图片有所显示；
=主机通过 *通信链路* 和 *分组交换机* 连接到一起=

2) 通信链路
   : 信号传输的媒介包括：同轴电缆、铜线、光纤和无线电频谱。
3) 传输速率
   : 以比特/秒(bit/s或bps)度量。
4) 分组
   : 一台端系统向另一台端系统发送数据时，发送端数据将数据分段，并为每段加上首部字节，这样形成的信息包称为分组（也就是封包）
   : 分组交换是相对于电路交换来说的，就是传输之前不需要确定通信路径.
5) 分组交换机
   可以实现分组通信的交换机；现在最流行的是两种。 *路由器*  和 *链路层* 交换机
6) 路径（route/path）
   : 从发送端系统到接收端系统，一个数据包所经历的一系列通信链路和分组交换机称为经过该网络的路径；
7) 因特网服务提供商(Internet Service Provider,ISP)
   : 端系统通过ISP接入因特网，每个ISP自身就是由一个多台分组交换机和多段通信链路组成的网络；包括各种类型如下
   + 本地电缆或电话公司的住宅区ISP
   + 公司ISP
   + 大学ISP
   + 机场、咖啡店、旅馆和其他公共场所提供的WiFi接入的ISP
   + 手机和其他移动设备的移动接入的蜂窝数据ISP
#+caption: 提供的接入类型
#+begin_quote
ISP 提供多种类型的因特网连接，包括但不限于：
宽带接入： 提供常见的家庭和企业宽带服务，例如数字订阅线路（DSL）、光纤（Fiber）、电缆互联网（Cable Internet）等。
移动网络： 提供移动数据服务，允许用户通过移动电话、移动热点或移动数据设备连接因特网，包括 4G 和 5G 网络。
企业服务： 提供专门面向企业客户的服务，如专线连接、托管服务、云服务等。
#+end_quote

1) 协议
   : 端系统、分组交换机和因特网的一些其他部件都要运行一些协议，这些协议控制因特网中信息的接收和发送；
   + =TCP(Transmission Control Protocol,传输控制协议)=
   + =IP(Internet Protocol,网际协议)=

     









** 1.1.2 服务描述
*从为应用程序提供服务的基础设施* 的角度来描述因特网；这就是 =套接字= 接口，该接口规定了运行在一个端系统的程序请求因特网
基础设施向运行另一个端系统上的特定目的地程序交付数据方式；就是不同程序通过这个接口可以将数据发送到互联网当中，无论我们使用
什么样的语言，java，C，pathon都没有影响；

** 1.1.3 什么是协议
协议（protocol）就是交互双方共同遵从的一套规范，在这个规范下双方才能够“理解”对方的问题，并给出回答，回答的内容也能够
使提问方理解；
=协议（protocol）定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文发送和/或接收一条报文或其他事件所采取的动作=


* 1.2 网络边缘

网络边缘指的就是指日常使用的计算机，智能手机和其他设备；其实就是互联网的最先部分；

** 1.2.1 接入网
将端系统物理连接到其边缘路由器的网络。边缘路由器是端系统到其他任何远程端系统的路径上的第一台路由器；

1. =家庭接入：DSL、电缆、FTTH、拨号和卫星=
    数字用户线（Digital Subscriber Line，DSL）和电缆是最常用的两种方式
    *DSL是一种接入的技术，可以使用电话线作为载体*
    #+caption: DSL因特网接入（图）
    [[file:imag/Snipaste_2023-11-19_23-58-23.png]]

    #+caption: 电缆光纤同轴（图）
    [[file:imag/Snipaste_2023-11-20_20-31-47.png]]

    #+caption: FTTH光纤接入（图）
    [[file:imag/Snipaste_2023-11-20_20-44-33.png]]

2. =企业（和家庭）接入：以太网和Wi-Fi=
   以太网就是通过网线直接接入，后者舍弃了网线使用Wi-Fi接收信号；
   #+caption: 以太网接入（图）
   [[file:imag/Snipaste_2023-11-20_20-55-20.png]]

   #+caption: wifi接入（图）
   [[file:imag/Snipaste_2023-11-20_20-59-20.png]]

3. =广域无线接入：3G和LTE=
   基站和蜂窝网络，就是现在手机使用的；不过4G也已经普及了，5G投资有点失败。
   

** 1.2.2 物理媒体
指网络信号传输的介质，可以分为两种类型， =引导型=  =非引导型=
引导型电波沿着媒体前行，如光缆、双绞铜线、或同轴电缆
非引导型电波沿着空气或外太空传播，例如无线局域网或数字卫星频道
1. 双绞铜线
   : 也叫双绞线，就是我们平时说的网线，每两根绞合在一起；DSL技术配合双绞线可以使用户以数十Mbps的速率接入因特网。
2. 同轴电缆
   : 一般作为电视信号线，有段时间国家一直推广的有线电视。
3. 光纤
   : 光纤线一般作为宽带接入线，现在已经普及。
4. 陆地无线电信道
   : 一般分为三类，一类距离很短，1-2米，如无线耳机，键盘等设备；无线LAN技术，也就是现在的Wi-Fi；第三类运行很广，跨越\\
   数万米，例如蜂窝接入技术使用了广域无线电信道；
5. 卫星无线电信道


* 1.3 网络核心
#+begin_quote
即由互联因特网端系统的分组交换机和链路构成的网状网络；
#+end_quote

** 1.3.1 分组交换
分组交换是指对于端系统要传输的信号，一般会分成多个包进行传输，这个传输称为分组；分组有两个特点：
1. 存储转发传输
   : 指一个分组（包）必须全部到达路由器才会进行转发，不是一进入路由器就开始转发，以包为单位；
2. 排队时延和分组丢失
   : 每个路由器都有工作能力的上限，如果前面的转发没有结束就会进入等待，排队满了就会发生包丢失现象，没法接收新的包；
3. 转发表和路由协议
   : 路由器中有一个转发表，告诉路由器应该把包转发到哪个路由器上面；
   *路由器识别包的路径根据IP地址，不是识别整个地址，而是识别其中的一部分确定下一个路由器，
   然后下一个识别别的部分，经过多个识别转发到正确的地址* ；


** 1.3.2 电路交换
电路交换也是数据传输的一种方式，分组交换是网线，电路交换代表的就是电话网络；
电路交换会一直为连接维护个连接，这个连接是真正的连接，一直在保持，只有这两个端可以用；

#+begin_quote
电路交换网络是一种在通信中使用的基础网络架构，其中在通信两端之间建立一条专用的物理连接，以便它们可以直接通信。这与包交换网络相对，后者在通信的时候将数据分割成小的数据包，并通过网络独立地传输。
以下是电路交换网络的一些关键特征和工作原理：

1) 专用连接：
   在电路交换网络中，通信的两端在通话期间占用一条物理通信路径，这条路径是专用的，只有这两个通信方可使用。
2)   持续连接：
  一旦建立了电路，通信的两端可以持续地使用这条连接，而不必在每个数据包传输之前重新建立连接。这种持续连接称为电路。
3) 实时通信：
   电路交换网络通常用于实时通信，如电话通话。由于连接是专用的，通信的两端可以实时交换信息，而不受网络中其他通信的干扰。
4) 资源占用：
   电路交换网络在通信建立期间占用网络资源，即使在通信双方不说话或不传输数据时也是如此。这导致了资源浪费，尤其是在通信量较低的情况下。
5) 传输速度：
   电路交换网络可以提供一定的传输速度，通信的两端可以期望在连接期间以固定速度传输数据。
6) 传统电话网络：
  传统的电话网络是电路交换网络的一个典型例子。当您拨打电话并与对方建立连接时，一条专用的电路将为您和对方之间的通话保持打开状态。
随着技术的发展，包交换网络（如互联网）的普及，电路交换网络在某些情况下的应用受到了一定的限制。然而，对于需要实时、稳定连接的应用，电路交换网络仍然具有一定的优势。
#+end_quote

1. 电路交换网络中的复用
   =频分复用，FDM= 或 =时分复用，TDM= FDM通过频谱区分不同连接，TDM是通过划分时间
    #+begin_quote
    FDM（Frequency Division Multiplexing）和TDM（Time Division Multiplexing）是两种在电路网络中用于多路复用的技术，它们允许在同一传输介质上同时传输多个信号。这两种技术有不同的工作原理：
    1. FDM（Frequency Division Multiplexing）：

    1. 工作原理：
	+ FDM 将可用的频谱划分为不同的频道，每个频道用于传输一个独立的信号。
	+ 每个信号占据不同的频率范围，因此它们在频谱上不重叠。
	+ 多个信号通过复用它们的频率，可以在同一传输介质上传输，而不会相互干扰。

    2. 步骤：
	+ 将每个输入信号通过调制器转换为不同的频率信号。
	+ 将这些频率信号叠加在一起形成一个复合信号。
	+ 在传输结束后，通过解调器将复合信号拆分回原始信号。

    3. 优点和缺点：
	+ 优点：有效地利用了频谱，允许多个信号同时传输。
	+ 缺点：需要准确的频率调谐和过滤，如果信号频率不准确或有重叠，可能会导致干扰。

    2. TDM（Time Division Multiplexing）：

    1. 工作原理：
	+ TDM 将时间划分为若干个时隙，每个时隙用于传输一个独立的信号。
	+ 不同信号依次占据传输介质的时隙，按照时间顺序进行传输。
	+ 在接收端，通过识别时隙并将其重新组合，可以还原出原始信号。

    2. 步骤：
	+ 将每个输入信号划分为时隙，并按照预定的顺序轮流传输。
	+ 在传输结束后，接收端通过识别时隙的顺序还原出原始信号。

    3. 优点和缺点：
	+ 优点：相对简单，不需要频率调谐，容易实现。
	+ 缺点：可能会浪费时间，特别是在某些信号不需要占满整个时隙的情况下。

    在实际应用中，FDM 和 TDM 可以结合使用，以更有效地利用资源。
    这种组合通常称为 WDM（Wavelength Division Multiplexing，波分复用）或 TDM/FDM。
    WDM是使用在光纤中的技术；
    #+end_quote

2. 分组交换与电路交换对比
   #+begin_quote
   分组交换和电路交换是两种在通信网络中广泛使用的不同技术，它们具有各自的优点和缺点。下面是它们的主要对比：
   1. 电路交换网络：
      1) 优点：

	 + 实时通信： 适用于需要实时、稳定连接的应用，如电话通话。
	 + 固定带宽： 一旦连接建立，带宽是固定的，可以确保在通话期间有足够的带宽。
	 + 简单： 相对简单，不需要在通信过程中动态分配资源。
      2) 缺点：
	 + 资源浪费： 在连接建立期间，即使在通信双方不说话或不传输数据时，仍然占用网络资源，导致资源浪费。
	 + 可伸缩性差： 难以适应不同数据流量的需求，特别是在通信量较低的情况下，效率较低。
	 + 故障影响： 如果电路中的一部分出现故障，整个通信链路可能中断。

   2. 分组交换网络：
      1) 优点：
	 + 资源共享： 多个通信实体可以共享网络资源，不需要为每个连接保留独立的专用路径。
	 + 灵活性： 适应不同数据流量的需求，可以动态分配和释放网络资源。
	 + 高效利用带宽： 在网络上的数据被分割成小的数据包，这样即使数据流量不连续，仍能有效利用带宽。

      + 缺点：
	+ 延迟： 数据包需要在网络中进行交换和传输，可能引入一些传输延迟。
	+ 不适用于实时通信： 不适合对时延敏感的应用，如实时语音通话。
	+ 丢包： 在网络拥塞或故障时，数据包可能会丢失，需要额外的机制进行纠错或重新传输。

      综合考虑：

      适用场景：
      电路交换适用于实时、稳定的通信，如传统电话网络。
      分组交换适用于数据通信，如互联网。
      网络设计：
      电路交换需要建立和维护专用连接，适合固定带宽和实时通信。
      分组交换更适合灵活、动态的网络环境，能够适应不同的数据流量需求。
      资源利用效率：
      电路交换在连接建立期间资源利用效率较高，但在通信期间可能存在资源浪费。
      分组交换更灵活，可以更高效地利用网络资源，适应不同数据流量的变化。

      综合而言，选择电路交换还是分组交换通常取决于特定应用的需求和网络设计的目标。在实际网络中，通常会采用混合的方法，根据需要灵活选择不同的技术。
   #+end_quote










** 1.3.3 网络的网络

互联网的基础设施，就是主机需要接入的网络，也就是公网 ；
由多层ISP组成，

#+caption: ISP结构（图）
[[file:imag/Snipaste_2023-11-21_23-57-55.png]]

#+begin_quote
ISP 是 Internet Service Provider（互联网服务提供商）的缩写，指的是提供上网服务的组织或公司。在网络架构中，ISP 可以分为不同的层级，这通常是基于其规模、网络覆盖范围和服务能力来划分的。以下是一些常见的 ISP 层级：

1. Tier 1 ISP（一级ISP）:
   1. Tier 1 ISP 是最高层级的 ISP，它们在全球范围内拥有大量的网络基础设施，并且不依赖于其他 ISP 来实现互联网连接。
   2. Tier 1 ISP 之间通常通过高容量的物理连接（光缆、卫星等）直接连接，而不需要经过其他 ISP。它们在 BGP（Border Gateway Protocol，边界网关协议）中被视为自治系统（AS）。

2. Tier 2 ISP（二级ISP）:
   1. Tier 2 ISP 通常是规模较小的 ISP，它们可能依赖于 Tier 1 ISP 或其他 Tier 2 ISP 来实现全球互联。
   2. Tier 2 ISP 可能在特定地理区域或国家内提供服务，并且它们之间可能通过 peering（对等连接）或购买带宽来相互连接。

3. Tier 3 ISP（三级ISP）:
   1. Tier 3 ISP 是最低层级的 ISP，通常为本地或特定社区提供服务。它们可能依赖于更大规模的 ISP 来获取对互联网的访问。
   2. Tier 3 ISP 的服务范围可能较小，主要关注于局部地区的连接。

这种层级结构反映了互联网中的连接和带宽分布，以及不同规模的 ISP 在网络中的作用。Tier 1 ISP 通常有更广泛的全球网络覆盖，而 Tier 2 和 Tier 3 ISP 则更专注于地方性的服务。
在实际情况中，有时也可能使用其他术语来描述 ISP 的层级结构，这取决于具体的网络架构和地理位置。
#+end_quote


* 1.4 分组交换中的时延、丢包和吞吐量

* 1.5 协议层次及其服务模型
分层是根据对数据的处理来说的，应用层开始包装数据，各层添加不同的功能，有的为了路由，为了数据转化，编码，加密等；
#+begin_quote
计算机网络的分层模型是为了更好地组织和管理网络功能，使不同的功能模块能够独立发展和演化。两个最常见的网络分层模型是 OSI（Open Systems Interconnection）模型和 TCP/IP 模型。
OSI 模型（七层模型）：

1. 物理层（Physical Layer）：
    负责传输比特流，定义连接物理媒体的特性。主要关注硬件设备和传输介质。
	设备：中继器（Repeater）、集线器（Hub）。
	
2. 数据链路层（Data Link Layer）：
    将比特流组织成帧（Frame），提供基本的错误检测和纠正。负责逻辑链路控制和介质访问控制。
    设备：网桥（Bridge）、交换机（Switch）、网卡（Network Interface Card）。

3. 网络层（Network Layer）：
    提供数据包的传输和路由，定义了通过网络的最佳路径。
    设备：路由器（Router）。

4. 传输层（Transport Layer）：
    提供端到端的通信和数据传输控制，确保数据的完整性和顺序。
    协议：TCP（Transmission Control Protocol）、UDP（User Datagram Protocol）。

5. 会话层（Session Layer）：
    管理和控制用户或应用程序之间的对话，包括建立、维护、同步和结束对话。

6. 表示层（Presentation Layer）：
    处理数据的表示，即数据的编码、加密和格式转换。

7. 应用层（Application Layer）：
    提供用户接口和网络服务，使应用程序能够访问网络。
    协议：HTTP、FTP、SMTP 等。

TCP/IP 模型（四层模型）：

1. 网络接口层（Link Layer）：
    对应于 OSI 模型的物理层和数据链路层，处理物理传输和数据链路控制。

2. 网络层（Internet Layer）：
    对应于 OSI 模型的网络层，负责数据包的路由、寻址和转发。
    协议：IP（Internet Protocol）。

3. 传输层（Transport Layer）：
    对应于 OSI 模型的传输层，提供端到端的通信和数据传输控制。
    协议：TCP、UDP。

4. 应用层（Application Layer）：
    对应于 OSI 模型的会话层、表示层和应用层的功能，提供网络服务和用户接口。
    协议：HTTP、FTP、SMTP、DNS 等。

这些模型都提供了一种层次化的方法来理解和设计计算机网络。在实际应用中，TCP/IP 模型更为常用，因为它是实际互联网所采用的模型。
#+end_quote

| 层级   | 功能                                                                            | 协议                           | 数据称谓         |
|-------+--------------------------------------------------------------------------------+-------------------------------+----------------|
| 应用层 | 网络应用程序及应用协议留存的地方                                                    | HTTP，SMTP，FTP                | 报文，message   |
| 运输层 | 在应用程序端点之间传送应用层报文                                                    | TCP，UDP                       | 报文段，segment  |
| 网络层 | 网络层分组从一台主机移动到另一台主机，运输层的协议TCP，向网络层递交运输层的报文段和目的地址 | IP                            | 数据报，datagram |
| 链路层 | 接收网络层的数据，把数据传送到下一个节点（主机或路由器），会经过不同的机器                | 以太网，WI-FI，DOSSIS           | 帧，Frame       |
| 物理层 | 将链路层中帧的一个bit从一个节点移动到下一个节点；与链了相关的协议                       | 以太网关于双绞线，同轴电缆传输协议 | bit            |

** 1.5.2 封装

给数据添加不同的控制信息，方便信息在各层级之间流动
#+begin_quote
在计算机网络的协议栈中，数据在每个层次都会被封装（Encapsulation）成不同的数据单元，以便在网络中进行传输。这个过程也被称为协议数据单元（PDU）的封装。以下是数据在各层如何封装的简要描述：
1. 应用层（Application Layer）：
    在应用层，数据以消息、请求或响应的形式存在。这些数据被封装为应用层协议数据单元（Application PDU），如 HTTP 的请求或响应报文。
2. 传输层（Transport Layer）：
    在传输层，数据被封装为传输层协议数据单元（Transport PDU）。对于 TCP 来说，数据被分割成称为段（Segment）的较小单元；对于 UDP，数据保持完整，称为用户数据报（User Datagram）。
3. 网络层（Internet Layer）：
    在网络层，数据被封装为网络层协议数据单元（Network PDU），通常称为数据包。这个数据包包含了目标主机的 IP 地址等信息。
4. 网络接口层（Link Layer）：
    在网络接口层，数据包被封装为链路层协议数据单元（Link PDU），通常称为帧。帧包含了物理地址（MAC 地址）等信息，以便在局域网中进行传输。
在每个层次上，添加的信息都是与该层次相关的控制信息，用于保障数据的可靠传输和正确处理。封装的过程在发送端进行，而在接收端，数据则按照相反的顺序进行解封装，直到达到应用层。这个过程被称为协议栈的解封装。
这种分层的封装和解封装的设计有助于网络的灵活性和可维护性，因为每个层次的实现都是相对独立的。
#+end_quote

#+caption: 封装示意图
[[file:imag/Snipaste_2023-11-23_11-37-41.png]]

* 1.6 网络攻击

计算机收到不同类型的攻击
1. =恶意程序放置到电脑中=
   软件进行自我复制，如病毒（需要交互，恶意邮件），蠕虫（不需要交互），进行传播；软件可以控制电脑，形成僵尸网络，发生DDos攻击；
2. 服务器和网络基础设施
   拒绝服务攻击（Denial-of-service Dos,attack）,可以分为以下三类
   1) 弱点攻击，计算机运行的程序，系统都可能受到特定报文的攻击，瘫痪
   2) 带宽洪泛，大量的报文使正常的请求无法得到响应；DDOS攻击，控制多个不同的主机发生大量请求；
   3) 连接洪泛，大量半开或全开的TCP连接，主机无法接收新的链接；
3. 嗅探分组
   像Wireshark一样，获取报文的副本；
4. 伪装IP
   IP哄骗；



